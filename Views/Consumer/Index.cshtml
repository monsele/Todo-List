<!DOCTYPE html>
<html>
<head>
    @*<link href=" https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">*@
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    @*<script src="~/jquery/jquery.js"></script>
    <script src="~/jquery/core.js"></script>*@
    <link href="~/css/site.css" rel="stylesheet" />
    <title>Index</title>
</head>
<body>
    <nav class="navbar navbar-expand-sm bg-light">
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="#" id="getAll">Get All</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#">Get All Recurring task</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="Register.html">Register</a>
            </li>
            <li></li>
        </ul>
    </nav>


    <table class="table table-striped">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">Description</th>
                <th scope="col">Due-Date</th>
            </tr>
        </thead>
        <tbody id="tasktable">
            <tr>
        
            </tr>
            <tr>
             
            </tr>
            <tr>
                
            </tr>
        </tbody>
    </table>
    <script type="text/javascript">
        $(document).ready(function () {
            $.getScript("~/bootswatch/cerulean/bootstrap.css");
            $('#getAll').click(function () {
                $.ajax({
                    type: 'GET',
                    url: 'http://localhost:63383/api/item',
                    dataType: 'json', 
                    success: function (data) {
                        
                        var task = document.getElementById('tasktable')
                        task.innerHTML = "";
                        var elements = "";
                        //for (key in data) {
                           
                        //    elements += '<tr><th>' + key + '</th><td>' + data[key].name + '</td>' + '<td>' + data[key].description + '</td>' + '<td>' + data[key].dueDate + '</td></tr>'
                        //    task.innerHTML += elements;
                        //}
                        $.each(data, (key, value) => {
                            data[key].dueDate = new Date();
                            console.log(value);
                            elements = '<tr><th>' + key + '</th><td>' + data[key].name + '</td>' + '<td>' + data[key].description + '</td>' + '<td>' + data[key].dueDate.toDateString() + '</td></tr>'
                            task.innerHTML = elements;
                        })
                    }


                })
            })
            $('#btnClear').click(function () {
                ulTask.empty();
            })
        });
    </script>

</body>
</html>